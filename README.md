# WASM Event Manager

WASM Event Manager is a web-based application for managing events, built with C++ and SDL2, and compiled to WebAssembly (WASM) using Emscripten. This allows the application to run directly in modern web browsers, providing a graphical user interface for all its functionalities.

This project was developed to explore the capabilities of C++ and SDL2 for web deployment through Emscripten, featuring client-side data persistence using IDBFS.

## Live Demo

[Live Demo Link](https://oopwasm.kremzein.com/event_gui.html)

## Features

* **User Profile:** Captures and stores basic user details (Name, Email, Phone, Company/School).
* **Event Creation:** Allows users to create three types of events:
    * Webinar
    * Conference
    * Workshop
    * Each event includes a title, description, date & time, virtual platform, and capacity.
* **Event Listing:** Displays all created events with key details.
* **Event Sign-up:** Users can sign up for events, with capacity limits enforced.
* **Event Deletion:** Supports deleting events, featuring a "did you mean?" fuzzy match for titles to prevent accidental deletion of similarly named events.
* **Event Search:** Implements a fuzzy search based on Levenshtein distance to find events by title.
* **Data Persistence:** Event data and attendee lists are saved locally in the user's browser using Emscripten's IDBFS (IndexedDB File System), allowing data to persist across sessions.
* **Simple GUI:** A basic graphical interface rendered using SDL2 for windowing and drawing, and SDL_ttf for text rendering.
* **Caesar Cipher Encryption:** A simple Caesar cipher is used for encrypting event details and attendee information stored in the data file (primarily for demonstration purposes, not for high security).

## Technology Stack

* **C++17:** Core application logic and data structures.
* **SDL2:** Simple DirectMedia Layer, used for creating the graphical window, handling user input (mouse, keyboard), and 2D rendering.
* **SDL2_ttf:** An SDL2 library extension for rendering TrueType fonts.
* **Emscripten (v3.1.55 or similar):** A compiler toolchain for compiling C/C++ code to WebAssembly, along with JavaScript glue code.
* **WebAssembly (WASM):** The binary instruction format that allows high-performance execution of the compiled C++ code in web browsers.
* **HTML/JavaScript:** The shell (`event_gui.html`, `event_gui.js`) generated by Emscripten to host and run the WASM application.
* **IDBFS (IndexedDB File System):** Emscripten's API for persistent client-side storage, using the browser's IndexedDB.
* **GitHub Actions:** For continuous integration and deployment (CI/CD) to GitHub Pages.

## Project Structure

The codebase is organized into the following main components:

* **`main.cpp`**:
  * Contains the `main()` function, the entry point of the application.
  * Manages SDL initialization and shutdown (`init_sdl`, `close_sdl`).
  * Runs the main application loop (`main_loop_iteration`).
  * Handles user input events (mouse clicks, keyboard input) via `handle_mouse_click`.
  * Manages global UI state variables (current screen, focused input field, messages).
  * Defines global `InputField` instances and GUI constants.
* **`app_logic.h` / `app_logic.cpp`**:
  * Defines core data structures: `User` (Singleton), `attendee`, `event` (base class), and derived event types (`webinar`, `conference`, `workshop`).
  * Contains the `events` class, which manages the collection of all events and handles the business logic for:
    * Creating, deleting, and searching for events.
    * User sign-up for events.
    * Loading events from and saving events to a persistent file (using encryption/decryption).
    * Managing attendee data persistence per event.
  * Includes helper functions like `cEncrypt`, `cDecrypt`, and `levenshteinDistance`.
* **`gui_utils.h` / `gui_utils.cpp`**:
  * Defines UI helper structures: `Button`, `InputField`.
  * Contains utility functions for rendering UI elements using SDL2: `render_text`, `render_button`, `render_input_field`.
  * Includes `update_button_hover` for visual feedback on buttons.
  * Defines the `AppState` enum, which dictates the current view/screen of the application.
* **`arial.ttf`**: (Or your chosen TrueType font file) Required for text rendering. Must be present in the root directory during compilation for Emscripten's `--preload-file` option.

## Building the Project

To build this project from source, you will need the Emscripten SDK installed and activated in your development environment.

1. **Clone the Repository:**
   ```bash
   git clone [https://github.com/gabrcodes/WASM-Event-Manager.git](https://github.com/gabrcodes/WASM-Event-Manager.git) 
   cd WASM-Event-Manager
   ```

2. **Ensure Font File is Present:**
   Make sure `arial.ttf` (or your chosen font file, matching the name in `main.cpp` and the build command) is in the root directory of the project.

3. **Compile with Emscripten:**
   Execute the following command in the root directory of the project:
   ```bash
   emcc main.cpp app_logic.cpp gui_utils.cpp \
        -o event_gui.html \
        -s USE_SDL=2 \
        -s USE_SDL_TTF=2 \
        -s ALLOW_MEMORY_GROWTH=1 \
        -s ASYNCIFY \
        --preload-file arial.ttf \
        -s FULL_ES2=1 \
        -s "EXPORTED_FUNCTIONS=['_main']" \
        -s "EXPORTED_RUNTIME_METHODS=['FS','ccall','IDBFS']" \
        -lidbfs.js \
        -O2 
        # For debugging, replace -O2 with -g4
        # For potentially smaller/faster release, try -O3
   ```
   This command will compile the C++ source files and link them with SDL2, SDL_ttf, and IDBFS support, outputting:
   * `event_gui.html`: The main HTML page to load in a browser.
   * `event_gui.js`: JavaScript glue code generated by Emscripten.
   * `event_gui.wasm`: The compiled WebAssembly module.
   * `event_gui.data`: A package containing preloaded files (like `arial.ttf`).

## Running Locally

Due to browser security policies (CORS for `file://` URLs), you must serve the generated files using a local HTTP server.

1. Navigate to the directory where the build output (`event_gui.html`, etc.) is located.
2. Start a simple HTTP server. Examples:
   * **Python 3:** `python3 -m http.server`
   * **Python 2:** `python -m SimpleHTTPServer`
   * **Node.js (if `http-server` is installed):** `npx http-server .`
   * **Emscripten's `emrun` (recommended for Emscripten projects):** `emrun event_gui.html`
3. Open your web browser and navigate to the local server address (e.g., `http://localhost:8000/event_gui.html`). The port number may vary.

## Deployment to GitHub Pages

This project includes a GitHub Actions workflow (`.github/workflows/deploy-gh-pages.yml`) for automatic deployment to GitHub Pages.

1. **Push to `main` branch:** When changes are pushed to the `main` branch, the workflow will automatically:
   * Set up an Emscripten environment.
   * Build the project using the `emcc` command specified in the workflow.
   * Deploy the contents of the `build_output` directory (containing `event_gui.html`, `.js`, `.wasm`, `.data`) to the `gh-pages` branch of your repository.
2. **Configure GitHub Pages:**
   * In your repository settings, under "Pages", set the source to "Deploy from a branch".
   * Select the `gh-pages` branch and the `/(root)` folder.
   * Your site will be available at `https://gabrcodes.github.io/WASM-Event-Manager/event_gui.html`.
   * You can also configure a custom domain (e.g., `oopwasm.kremzein.com` as discussed) in the GitHub Pages settings and update your DNS records accordingly (typically a `CNAME` record for subdomains pointing to `gabrcodes.github.io`).

## Known Issues / Future Improvements

* **UI/UX:** The current GUI is very basic. Enhancements could include:
  * More visually appealing UI elements and layout.
  * Better visual feedback for user interactions.
  * Responsive design for different screen sizes.
* **Error Handling:** While some input validation is present (e.g., for capacity), more comprehensive error handling across all inputs would improve robustness.
* **Security:** The Caesar cipher used for data file encryption is for demonstration and not cryptographically secure. For sensitive data, stronger encryption methods would be necessary.
* **Code Structure:** While refactored, further modularization (e.g., a `UIManager` class) could be beneficial for larger features.
* **Console Warnings:** The `emscripten_set_main_loop_timing` warning might still appear in the browser console, though it doesn't seem to affect functionality. Further investigation could resolve it.
* **Attendee Display/Management:** Currently, attendee data is persisted but not explicitly displayed or managed in the GUI beyond the count in "Show All Events". Future features could include viewing attendees for an event or allowing users to remove themselves from an event.

---

This project serves as a practical example of porting a C++ desktop-style application to the web using modern tools like Emscripten and WebAssembly.

